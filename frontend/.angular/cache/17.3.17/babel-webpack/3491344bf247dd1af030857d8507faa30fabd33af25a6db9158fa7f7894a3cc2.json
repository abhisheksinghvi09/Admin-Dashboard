{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../nav/nav.component\";\nfunction UsersComponent_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nfunction UsersComponent_tr_23_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function UsersComponent_tr_23_ng_container_12_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const user_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.editUser(user_r3));\n    });\n    i0.ɵɵtext(2, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function UsersComponent_tr_23_ng_container_12_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const user_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.deleteUser(user_r3._id));\n    });\n    i0.ɵɵtext(4, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction UsersComponent_tr_23_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 13);\n    i0.ɵɵtext(1, \"-\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsersComponent_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"span\", 8);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"td\")(9, \"span\", 8);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtemplate(12, UsersComponent_tr_23_ng_container_12_Template, 5, 0, \"ng-container\", 9)(13, UsersComponent_tr_23_span_13_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const user_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r3.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(user_r3.role);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(user_r3.role);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(user_r3.status);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(user_r3.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.canModify(user_r3));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.canModify(user_r3));\n  }\n}\nfunction UsersComponent_div_24_input_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 30);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UsersComponent_div_24_input_7_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r0.form.password, $event) || (ctx_r0.form.password = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.form.password);\n  }\n}\nfunction UsersComponent_div_24_option_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 31);\n    i0.ɵɵtext(1, \"Admin\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsersComponent_div_24_p_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 32);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.modalError);\n  }\n}\nfunction UsersComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵlistener(\"click\", function UsersComponent_div_24_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.closeModal());\n    });\n    i0.ɵɵelementStart(1, \"div\", 15);\n    i0.ɵɵlistener(\"click\", function UsersComponent_div_24_Template_div_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      return i0.ɵɵresetView($event.stopPropagation());\n    });\n    i0.ɵɵelementStart(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"form\", 16);\n    i0.ɵɵlistener(\"ngSubmit\", function UsersComponent_div_24_Template_form_ngSubmit_4_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.saveUser());\n    });\n    i0.ɵɵelementStart(5, \"input\", 17);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UsersComponent_div_24_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.form.name, $event) || (ctx_r0.form.name = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"input\", 18);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UsersComponent_div_24_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.form.email, $event) || (ctx_r0.form.email = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, UsersComponent_div_24_input_7_Template, 1, 1, \"input\", 19);\n    i0.ɵɵelementStart(8, \"select\", 20);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UsersComponent_div_24_Template_select_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.form.role, $event) || (ctx_r0.form.role = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(9, \"option\", 21);\n    i0.ɵɵtext(10, \"User\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, UsersComponent_div_24_option_11_Template, 2, 0, \"option\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"select\", 23);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UsersComponent_div_24_Template_select_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.form.status, $event) || (ctx_r0.form.status = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(13, \"option\", 24);\n    i0.ɵɵtext(14, \"Active\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"option\", 25);\n    i0.ɵɵtext(16, \"Inactive\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(17, UsersComponent_div_24_p_17_Template, 2, 1, \"p\", 26);\n    i0.ɵɵelementStart(18, \"div\", 27)(19, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function UsersComponent_div_24_Template_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.closeModal());\n    });\n    i0.ɵɵtext(20, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"button\", 29);\n    i0.ɵɵtext(22, \"Save\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.isEditing ? \"Edit User\" : \"Add User\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.form.name);\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.form.email);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isEditing);\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.form.role);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.currentUserRole === \"superadmin\");\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.form.status);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.modalError);\n  }\n}\nexport let UsersComponent = /*#__PURE__*/(() => {\n  class UsersComponent {\n    constructor(api, auth) {\n      this.api = api;\n      this.auth = auth;\n      this.users = [];\n      this.showModal = false;\n      this.isEditing = false;\n      this.editingId = '';\n      this.form = {\n        name: '',\n        email: '',\n        password: '',\n        role: 'user',\n        status: 'active'\n      };\n      this.currentUserRole = '';\n      this.error = '';\n      this.modalError = '';\n      const user = this.auth.getUser();\n      this.currentUserRole = user?.role || '';\n    }\n    ngOnInit() {\n      this.loadUsers();\n    }\n    loadUsers() {\n      this.api.getUsers().subscribe({\n        next: data => this.users = data,\n        error: err => this.error = err.error?.message || 'Failed to load users'\n      });\n    }\n    canModify(user) {\n      if (user.role === 'superadmin') return false;\n      if (this.currentUserRole === 'superadmin') return true;\n      if (this.currentUserRole === 'admin' && user.role === 'user') return true;\n      return false;\n    }\n    openModal() {\n      this.form = {\n        name: '',\n        email: '',\n        password: '',\n        role: 'user',\n        status: 'active'\n      };\n      this.isEditing = false;\n      this.modalError = '';\n      this.showModal = true;\n    }\n    editUser(user) {\n      this.form = {\n        ...user,\n        password: ''\n      };\n      this.editingId = user._id;\n      this.isEditing = true;\n      this.modalError = '';\n      this.showModal = true;\n    }\n    closeModal() {\n      this.showModal = false;\n    }\n    saveUser() {\n      this.modalError = '';\n      const action = this.isEditing ? this.api.updateUser(this.editingId, this.form) : this.api.createUser(this.form);\n      action.subscribe({\n        next: () => {\n          this.closeModal();\n          this.loadUsers();\n        },\n        error: err => this.modalError = err.error?.message || 'Operation failed'\n      });\n    }\n    deleteUser(id) {\n      if (confirm('Are you sure you want to delete this user?')) {\n        this.api.deleteUser(id).subscribe({\n          next: () => this.loadUsers(),\n          error: err => this.error = err.error?.message || 'Delete failed'\n        });\n      }\n    }\n    static {\n      this.ɵfac = function UsersComponent_Factory(t) {\n        return new (t || UsersComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.AuthService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: UsersComponent,\n        selectors: [[\"app-users\"]],\n        decls: 25,\n        vars: 3,\n        consts: [[1, \"container\"], [1, \"header\"], [1, \"btn-add\", 3, \"click\"], [\"class\", \"error\", 4, \"ngIf\"], [1, \"table-container\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"modal-overlay\", 3, \"click\", 4, \"ngIf\"], [1, \"error\"], [1, \"badge\"], [4, \"ngIf\"], [\"class\", \"no-action\", 4, \"ngIf\"], [1, \"btn-edit\", 3, \"click\"], [1, \"btn-delete\", 3, \"click\"], [1, \"no-action\"], [1, \"modal-overlay\", 3, \"click\"], [1, \"modal\", 3, \"click\"], [3, \"ngSubmit\"], [\"type\", \"text\", \"name\", \"name\", \"placeholder\", \"Name\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"email\", \"name\", \"email\", \"placeholder\", \"Email\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"password\", \"name\", \"password\", \"placeholder\", \"Password\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"name\", \"role\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"user\"], [\"value\", \"admin\", 4, \"ngIf\"], [\"name\", \"status\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"active\"], [\"value\", \"inactive\"], [\"class\", \"modal-error\", 4, \"ngIf\"], [1, \"modal-actions\"], [\"type\", \"button\", 1, \"btn-cancel\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn-save\"], [\"type\", \"password\", \"name\", \"password\", \"placeholder\", \"Password\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"admin\"], [1, \"modal-error\"]],\n        template: function UsersComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelement(0, \"app-nav\");\n            i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"h2\");\n            i0.ɵɵtext(4, \"User Management\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"button\", 2);\n            i0.ɵɵlistener(\"click\", function UsersComponent_Template_button_click_5_listener() {\n              return ctx.openModal();\n            });\n            i0.ɵɵtext(6, \"+ Add User\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(7, UsersComponent_p_7_Template, 2, 1, \"p\", 3);\n            i0.ɵɵelementStart(8, \"div\", 4)(9, \"table\")(10, \"thead\")(11, \"tr\")(12, \"th\");\n            i0.ɵɵtext(13, \"Name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"th\");\n            i0.ɵɵtext(15, \"Email\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"th\");\n            i0.ɵɵtext(17, \"Role\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"th\");\n            i0.ɵɵtext(19, \"Status\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"th\");\n            i0.ɵɵtext(21, \"Actions\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(22, \"tbody\");\n            i0.ɵɵtemplate(23, UsersComponent_tr_23_Template, 14, 10, \"tr\", 5);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(24, UsersComponent_div_24_Template, 23, 8, \"div\", 6);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance(16);\n            i0.ɵɵproperty(\"ngForOf\", ctx.users);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.showModal);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i5.NavComponent],\n        styles: [\".container[_ngcontent-%COMP%]{padding:32px;max-width:1200px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}h2[_ngcontent-%COMP%]{color:#333}.error[_ngcontent-%COMP%], .modal-error[_ngcontent-%COMP%]{color:#e74c3c;font-size:14px;margin-bottom:16px}.modal-error[_ngcontent-%COMP%]{text-align:center}.btn-add[_ngcontent-%COMP%]{background:#667eea;color:#fff;border:none;padding:10px 20px;border-radius:8px;font-weight:500}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000000d;overflow:hidden}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:16px;text-align:left;border-bottom:1px solid #eee}th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#555}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.badge.superadmin[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.badge.admin[_ngcontent-%COMP%]{background:#f3e8ff;color:#7c3aed}.badge.user[_ngcontent-%COMP%]{background:#e8f0fe;color:#1a73e8}.badge.active[_ngcontent-%COMP%]{background:#e6f4ea;color:#1e7e34}.badge.inactive[_ngcontent-%COMP%]{background:#fce8e8;color:#c0392b}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{border:none;padding:6px 12px;border-radius:4px;margin-right:8px;font-size:12px}.btn-edit[_ngcontent-%COMP%]{background:#e8f0fe;color:#1a73e8}.btn-delete[_ngcontent-%COMP%]{background:#fce8e8;color:#c0392b}.no-action[_ngcontent-%COMP%]{color:#999}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center}.modal[_ngcontent-%COMP%]{background:#fff;padding:32px;border-radius:12px;width:100%;max-width:400px}.modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:20px}.modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px;border:1px solid #ddd;border-radius:8px;font-size:14px}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:8px}.btn-cancel[_ngcontent-%COMP%]{flex:1;padding:12px;border:1px solid #ddd;background:#fff;border-radius:8px}.btn-save[_ngcontent-%COMP%]{flex:1;padding:12px;background:#667eea;color:#fff;border:none;border-radius:8px}\"]\n      });\n    }\n  }\n  return UsersComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}